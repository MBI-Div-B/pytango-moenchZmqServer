
<!DOCTYPE html>

<html class="no-js" lang="en">
<head>
<meta charset="utf-8"/>
<meta content="width=device-width,initial-scale=1" name="viewport"/>
<link href="../guideline/" rel="prev"/>
<link href="../reference/" rel="next"/>
<link href="../assets/images/favicon.png" rel="icon"/>
<meta content="mkdocs-1.4.2, mkdocs-material-9.0.6" name="generator"/>
<title>Detector reference - pytango-moenchZmqServer</title>
<link href="../assets/stylesheets/main.558e4712.min.css" rel="stylesheet"/>
<link href="../assets/stylesheets/palette.2505c338.min.css" rel="stylesheet"/>
<link crossorigin="" href="https://fonts.gstatic.com" rel="preconnect"/>
<link href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&amp;display=fallback" rel="stylesheet"/>
<style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
<link href="../assets/_mkdocstrings.css" rel="stylesheet"/>
<script>__md_scope=new URL("..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
<link href="../assets/stylesheets/glightbox.min.css" rel="stylesheet"/><style>
            html.glightbox-open { overflow: initial; height: 100%; }
            .gslide-title { margin-top: 0px; user-select: text; }
            .gslide-desc { color: #666; user-select: text; }
            .gslide-image img { background: white; }
            
                .gscrollbar-fixer { padding-right: 15px; }
                .gdesc-inner { font-size: 0.75rem; }
                body[data-md-color-scheme="slate"] .gdesc-inner { background: var(--md-default-bg-color);}
                body[data-md-color-scheme="slate"] .gslide-title { color: var(--md-default-fg-color);}
                body[data-md-color-scheme="slate"] .gslide-desc { color: var(--md-default-fg-color);}
                </style><script src="../assets/javascripts/glightbox.min.js"></script></head>
<body data-md-color-accent="" data-md-color-primary="" data-md-color-scheme="default" dir="ltr">
<input autocomplete="off" class="md-toggle" data-md-toggle="drawer" id="__drawer" type="checkbox"/>
<input autocomplete="off" class="md-toggle" data-md-toggle="search" id="__search" type="checkbox"/>
<label class="md-overlay" for="__drawer"></label>
<div data-md-component="skip">
<a class="md-skip" href="#json-header">
          Skip to content
        </a>
</div>
<div data-md-component="announce">
</div>
<header class="md-header" data-md-component="header">
<nav aria-label="Header" class="md-header__inner md-grid">
<a aria-label="pytango-moenchZmqServer" class="md-header__button md-logo" data-md-component="logo" href=".." title="pytango-moenchZmqServer">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"></path></svg>
</a>
<label class="md-header__button md-icon" for="__drawer">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"></path></svg>
</label>
<div class="md-header__title" data-md-component="header-title">
<div class="md-header__ellipsis">
<div class="md-header__topic">
<span class="md-ellipsis">
            pytango-moenchZmqServer
          </span>
</div>
<div class="md-header__topic" data-md-component="header-topic">
<span class="md-ellipsis">
            
              Detector reference
            
          </span>
</div>
</div>
</div>
<label class="md-header__button md-icon" for="__search">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"></path></svg>
</label>
<div class="md-search" data-md-component="search" role="dialog">
<label class="md-search__overlay" for="__search"></label>
<div class="md-search__inner" role="search">
<form class="md-search__form" name="search">
<input aria-label="Search" autocapitalize="off" autocomplete="off" autocorrect="off" class="md-search__input" data-md-component="search-query" name="query" placeholder="Search" required="" spellcheck="false" type="text"/>
<label class="md-search__icon md-icon" for="__search">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"></path></svg>
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"></path></svg>
</label>
<nav aria-label="Search" class="md-search__options">
<button aria-label="Clear" class="md-search__icon md-icon" tabindex="-1" title="Clear" type="reset">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"></path></svg>
</button>
</nav>
</form>
<div class="md-search__output">
<div class="md-search__scrollwrap" data-md-scrollfix="">
<div class="md-search-result" data-md-component="search-result">
<div class="md-search-result__meta">
            Initializing search
          </div>
<ol class="md-search-result__list" role="presentation"></ol>
</div>
</div>
</div>
</div>
</div>
</nav>
</header>
<div class="md-container" data-md-component="container">
<main class="md-main" data-md-component="main">
<div class="md-main__inner md-grid">
<div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation">
<div class="md-sidebar__scrollwrap">
<div class="md-sidebar__inner">
<nav aria-label="Navigation" class="md-nav md-nav--primary" data-md-level="0">
<label class="md-nav__title" for="__drawer">
<a aria-label="pytango-moenchZmqServer" class="md-nav__button md-logo" data-md-component="logo" href=".." title="pytango-moenchZmqServer">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"></path></svg>
</a>
    pytango-moenchZmqServer
  </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="..">
        Home
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../installation/">
        Installation
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../guideline/">
        Coding guideline
      </a>
</li>
<li class="md-nav__item md-nav__item--active">
<input class="md-nav__toggle md-toggle" data-md-toggle="toc" id="__toc" type="checkbox"/>
<label class="md-nav__link md-nav__link--active" for="__toc">
          Detector reference
          <span class="md-nav__icon md-icon"></span>
</label>
<a class="md-nav__link md-nav__link--active" href="./">
        Detector reference
      </a>
<nav aria-label="Table of contents" class="md-nav md-nav--secondary">
<label class="md-nav__title" for="__toc">
<span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
<ul class="md-nav__list" data-md-component="toc" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="#json-header">
    JSON header
  </a>
<nav aria-label="JSON header" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#changes-between-the-firmware-versions">
    Changes between the firmware versions
  </a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#payload">
    Payload
  </a>
<nav aria-label="Payload" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#frame-remapping">
    Frame remapping
  </a>
</li>
</ul>
</nav>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../reference/">
        Code reference
      </a>
</li>
</ul>
</nav>
</div>
</div>
</div>
<div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc">
<div class="md-sidebar__scrollwrap">
<div class="md-sidebar__inner">
<nav aria-label="Table of contents" class="md-nav md-nav--secondary">
<label class="md-nav__title" for="__toc">
<span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
<ul class="md-nav__list" data-md-component="toc" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="#json-header">
    JSON header
  </a>
<nav aria-label="JSON header" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#changes-between-the-firmware-versions">
    Changes between the firmware versions
  </a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#payload">
    Payload
  </a>
<nav aria-label="Payload" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#frame-remapping">
    Frame remapping
  </a>
</li>
</ul>
</nav>
</li>
</ul>
</nav>
</div>
</div>
</div>
<div class="md-content" data-md-component="content">
<article class="md-content__inner md-typeset">
<h1>Detector reference</h1>
<p>Detector sends two separate ZMQ messages for each acquired frame coming after each other. </p>
<h2 id="json-header">JSON header<a class="headerlink" href="#json-header" title="Permanent link">Â¶</a></h2>
<p>The first one is a JSON header where all necessary information is stored.</p>
<p>This is the JSON header signature for the firmware version 6.1.2 for a MOENCH detector:
<div class="highlight"><pre><span></span><code><span class="p">{</span>
<span class="w">    </span><span class="nt">"jsonversion"</span><span class="p">:</span><span class="w"> </span><span class="err">u</span><span class="kc">ns</span><span class="err">ig</span><span class="kc">ne</span><span class="err">d</span><span class="w"> </span><span class="err">i</span><span class="kc">nt</span><span class="p">,</span>
<span class="w">    </span><span class="nt">"bitmode"</span><span class="p">:</span><span class="w"> </span><span class="err">u</span><span class="kc">ns</span><span class="err">ig</span><span class="kc">ne</span><span class="err">d</span><span class="w"> </span><span class="err">i</span><span class="kc">nt</span><span class="p">,</span>
<span class="w">    </span><span class="nt">"fileIndex"</span><span class="p">:</span><span class="w"> </span><span class="err">u</span><span class="kc">ns</span><span class="err">ig</span><span class="kc">ne</span><span class="err">d</span><span class="w"> </span><span class="err">lo</span><span class="kc">n</span><span class="err">g</span><span class="w"> </span><span class="err">i</span><span class="kc">nt</span><span class="p">,</span>
<span class="w">    </span><span class="nt">"detshape"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">        </span><span class="err">u</span><span class="kc">ns</span><span class="err">ig</span><span class="kc">ne</span><span class="err">d</span><span class="w"> </span><span class="err">i</span><span class="kc">nt</span><span class="p">,</span>
<span class="w">        </span><span class="err">u</span><span class="kc">ns</span><span class="err">ig</span><span class="kc">ne</span><span class="err">d</span><span class="w"> </span><span class="err">i</span><span class="kc">nt</span>
<span class="w">    </span><span class="p">],</span>
<span class="w">    </span><span class="nt">"shape"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">        </span><span class="err">u</span><span class="kc">ns</span><span class="err">ig</span><span class="kc">ne</span><span class="err">d</span><span class="w"> </span><span class="err">i</span><span class="kc">nt</span><span class="p">,</span>
<span class="w">        </span><span class="err">u</span><span class="kc">ns</span><span class="err">ig</span><span class="kc">ne</span><span class="err">d</span><span class="w"> </span><span class="err">i</span><span class="kc">nt</span>
<span class="w">    </span><span class="p">],</span>
<span class="w">    </span><span class="nt">"size"</span><span class="p">:</span><span class="w"> </span><span class="err">u</span><span class="kc">ns</span><span class="err">ig</span><span class="kc">ne</span><span class="err">d</span><span class="w"> </span><span class="err">i</span><span class="kc">nt</span><span class="p">,</span>
<span class="w">    </span><span class="nt">"acqIndex"</span><span class="p">:</span><span class="w"> </span><span class="err">u</span><span class="kc">ns</span><span class="err">ig</span><span class="kc">ne</span><span class="err">d</span><span class="w"> </span><span class="err">lo</span><span class="kc">n</span><span class="err">g</span><span class="w"> </span><span class="err">i</span><span class="kc">nt</span><span class="p">,</span>
<span class="w">    </span><span class="nt">"frameIndex"</span><span class="p">:</span><span class="w"> </span><span class="err">u</span><span class="kc">ns</span><span class="err">ig</span><span class="kc">ne</span><span class="err">d</span><span class="w"> </span><span class="err">lo</span><span class="kc">n</span><span class="err">g</span><span class="w"> </span><span class="err">i</span><span class="kc">nt</span><span class="p">,</span>
<span class="w">    </span><span class="nt">"progress"</span><span class="p">:</span><span class="w"> </span><span class="err">double</span><span class="p">,</span>
<span class="w">    </span><span class="nt">"fname"</span><span class="p">:</span><span class="w"> </span><span class="err">s</span><span class="kc">tr</span><span class="err">i</span><span class="kc">n</span><span class="err">g</span><span class="p">,</span>
<span class="w">    </span><span class="nt">"data"</span><span class="p">:</span><span class="w"> </span><span class="err">u</span><span class="kc">ns</span><span class="err">ig</span><span class="kc">ne</span><span class="err">d</span><span class="w"> </span><span class="err">i</span><span class="kc">nt</span><span class="p">,</span>
<span class="w">    </span><span class="nt">"completeImage"</span><span class="p">:</span><span class="w"> </span><span class="err">u</span><span class="kc">ns</span><span class="err">ig</span><span class="kc">ne</span><span class="err">d</span><span class="w"> </span><span class="err">i</span><span class="kc">nt</span><span class="p">,</span>

<span class="w">    </span><span class="nt">"frameNumber"</span><span class="p">:</span><span class="w"> </span><span class="err">u</span><span class="kc">ns</span><span class="err">ig</span><span class="kc">ne</span><span class="err">d</span><span class="w"> </span><span class="err">lo</span><span class="kc">n</span><span class="err">g</span><span class="w"> </span><span class="err">lo</span><span class="kc">n</span><span class="err">g</span><span class="w"> </span><span class="err">i</span><span class="kc">nt</span><span class="p">,</span>
<span class="w">    </span><span class="nt">"expLength"</span><span class="p">:</span><span class="w"> </span><span class="err">u</span><span class="kc">ns</span><span class="err">ig</span><span class="kc">ne</span><span class="err">d</span><span class="w"> </span><span class="err">i</span><span class="kc">nt</span><span class="p">,</span>
<span class="w">    </span><span class="nt">"packetNumber"</span><span class="p">:</span><span class="w"> </span><span class="err">u</span><span class="kc">ns</span><span class="err">ig</span><span class="kc">ne</span><span class="err">d</span><span class="w"> </span><span class="err">i</span><span class="kc">nt</span><span class="p">,</span>
<span class="w">    </span><span class="nt">"detSpec1"</span><span class="p">:</span><span class="w"> </span><span class="err">u</span><span class="kc">ns</span><span class="err">ig</span><span class="kc">ne</span><span class="err">d</span><span class="w"> </span><span class="err">lo</span><span class="kc">n</span><span class="err">g</span><span class="w"> </span><span class="err">i</span><span class="kc">nt</span><span class="p">,</span>
<span class="w">    </span><span class="nt">"timestamp"</span><span class="p">:</span><span class="w"> </span><span class="err">u</span><span class="kc">ns</span><span class="err">ig</span><span class="kc">ne</span><span class="err">d</span><span class="w"> </span><span class="err">lo</span><span class="kc">n</span><span class="err">g</span><span class="w"> </span><span class="err">i</span><span class="kc">nt</span><span class="p">,</span>
<span class="w">    </span><span class="nt">"modId"</span><span class="p">:</span><span class="w"> </span><span class="err">u</span><span class="kc">ns</span><span class="err">ig</span><span class="kc">ne</span><span class="err">d</span><span class="w"> </span><span class="err">i</span><span class="kc">nt</span><span class="p">,</span>
<span class="w">    </span><span class="nt">"row"</span><span class="p">:</span><span class="w"> </span><span class="err">u</span><span class="kc">ns</span><span class="err">ig</span><span class="kc">ne</span><span class="err">d</span><span class="w"> </span><span class="err">i</span><span class="kc">nt</span><span class="p">,</span>
<span class="w">    </span><span class="nt">"column"</span><span class="p">:</span><span class="w"> </span><span class="err">u</span><span class="kc">ns</span><span class="err">ig</span><span class="kc">ne</span><span class="err">d</span><span class="w"> </span><span class="err">i</span><span class="kc">nt</span><span class="p">,</span>
<span class="w">    </span><span class="nt">"detSpec2"</span><span class="p">:</span><span class="w"> </span><span class="err">u</span><span class="kc">ns</span><span class="err">ig</span><span class="kc">ne</span><span class="err">d</span><span class="w"> </span><span class="err">i</span><span class="kc">nt</span><span class="p">,</span>
<span class="w">    </span><span class="nt">"detSpec3"</span><span class="p">:</span><span class="w"> </span><span class="err">u</span><span class="kc">ns</span><span class="err">ig</span><span class="kc">ne</span><span class="err">d</span><span class="w"> </span><span class="err">i</span><span class="kc">nt</span><span class="p">,</span>
<span class="w">    </span><span class="nt">"detSpec4"</span><span class="p">:</span><span class="w"> </span><span class="err">u</span><span class="kc">ns</span><span class="err">ig</span><span class="kc">ne</span><span class="err">d</span><span class="w"> </span><span class="err">i</span><span class="kc">nt</span><span class="p">,</span>
<span class="w">    </span><span class="nt">"detType"</span><span class="p">:</span><span class="w"> </span><span class="err">u</span><span class="kc">ns</span><span class="err">ig</span><span class="kc">ne</span><span class="err">d</span><span class="w"> </span><span class="err">i</span><span class="kc">nt</span><span class="p">,</span>
<span class="w">    </span><span class="nt">"version"</span><span class="p">:</span><span class="w"> </span><span class="err">u</span><span class="kc">ns</span><span class="err">ig</span><span class="kc">ne</span><span class="err">d</span><span class="w"> </span><span class="err">i</span><span class="kc">nt</span><span class="p">,</span>

<span class="w">    </span><span class="nt">"flipRows"</span><span class="p">:</span><span class="w"> </span><span class="err">u</span><span class="kc">ns</span><span class="err">ig</span><span class="kc">ne</span><span class="err">d</span><span class="w"> </span><span class="err">i</span><span class="kc">nt</span><span class="p">,</span>
<span class="w">    </span><span class="nt">"quad"</span><span class="p">:</span><span class="w"> </span><span class="err">u</span><span class="kc">ns</span><span class="err">ig</span><span class="kc">ne</span><span class="err">d</span><span class="w"> </span><span class="err">i</span><span class="kc">nt</span><span class="p">,</span>
<span class="w">    </span><span class="nt">"addJsonHeader"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="err">s</span><span class="kc">tr</span><span class="err">i</span><span class="kc">n</span><span class="err">g</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="err">s</span><span class="kc">tr</span><span class="err">i</span><span class="kc">n</span><span class="err">g</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
with a comprehensive description for each field </p>
<table>
<thead>
<tr>
<th>Field</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>jsonversion</td>
<td>Version of the json header. Value at 4 for v6.x.x   and v7.x.x</td>
</tr>
<tr>
<td>bitmode</td>
<td>Bits per pixel [4|8|16|32]</td>
</tr>
<tr>
<td>fileIndex</td>
<td>Current file acquisition index</td>
</tr>
<tr>
<td>detshape</td>
<td>Geometry of the entire detector</td>
</tr>
<tr>
<td>shape</td>
<td>Geometry of the current port streamed out</td>
</tr>
<tr>
<td>size</td>
<td>Size of image of current port in bytesout</td>
</tr>
<tr>
<td>acqIndex</td>
<td>Frame number from the detector (redundant)</td>
</tr>
<tr>
<td>frameIndex</td>
<td>Frame number of current acquisition (Starting at 0)</td>
</tr>
<tr>
<td>progress</td>
<td>Progress of current acquisition in %</td>
</tr>
<tr>
<td>fname</td>
<td>Current file name</td>
</tr>
<tr>
<td>data</td>
<td>1 if there is data following 0 if dummy header</td>
</tr>
<tr>
<td>completeImage</td>
<td>1 if no missing packets for this frame in this port,   else 0</td>
</tr>
<tr>
<td>frameNumber</td>
<td>Frame number [From detector udp header]</td>
</tr>
<tr>
<td>expLength</td>
<td>subframe number (32 bit eiger) or real time exposure   time in 100ns (others) [From detector udp header]</td>
</tr>
<tr>
<td>packetNumber</td>
<td>Number of packets caught for that frame</td>
</tr>
<tr>
<td>detSpec1</td>
<td>See here [From detector udp header]</td>
</tr>
<tr>
<td>timestamp</td>
<td>Timestamp with 10 MHz clock [From detector udp   header]</td>
</tr>
<tr>
<td>modId</td>
<td>Module Id [From detector udp header]</td>
</tr>
<tr>
<td>row</td>
<td>Row number in detector [From detector udp header]</td>
</tr>
<tr>
<td>column</td>
<td>Column number in detector [From detector udp header]</td>
</tr>
<tr>
<td>detSpec2</td>
<td>See here [From detector udp header]</td>
</tr>
<tr>
<td>detSpec3</td>
<td>See here [From detector udp header]</td>
</tr>
<tr>
<td>detSpec4</td>
<td>See here [From detector udp header]</td>
</tr>
<tr>
<td>detType detSpec3</td>
<td>Detector type enum See Detector enum [From   detector udp header]</td>
</tr>
<tr>
<td>version</td>
<td>Detector header version. At 2 [From detector udp   header]</td>
</tr>
<tr>
<td>flipRows</td>
<td>1 if rows should be flipped. Usually for Eiger bottom.</td>
</tr>
<tr>
<td>quad</td>
<td>1 if its an Eiger quad.</td>
</tr>
<tr>
<td>addJsonHeader</td>
<td>Optional custom parameters that is required for   processing code.</td>
</tr>
</tbody>
</table>
<p>Here is an example of the received message from MOENCH detector:
<div class="highlight"><pre><span></span><code><span class="p">{</span>
<span class="w">    </span><span class="nt">"jsonversion"</span><span class="p">:</span><span class="w"> </span><span class="mi">4</span><span class="p">,</span>
<span class="w">    </span><span class="nt">"bitmode"</span><span class="p">:</span><span class="w"> </span><span class="mi">16</span><span class="p">,</span>
<span class="w">    </span><span class="nt">"fileIndex"</span><span class="p">:</span><span class="w"> </span><span class="mi">6</span><span class="p">,</span>
<span class="w">    </span><span class="nt">"detshape"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="mi">1</span><span class="p">],</span>
<span class="w">    </span><span class="nt">"shape"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="mi">400</span><span class="p">,</span><span class="w"> </span><span class="mi">400</span><span class="p">],</span>
<span class="w">    </span><span class="nt">"size"</span><span class="p">:</span><span class="w"> </span><span class="mi">320000</span><span class="p">,</span>
<span class="w">    </span><span class="nt">"acqIndex"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span>
<span class="w">    </span><span class="nt">"frameIndex"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span>
<span class="w">    </span><span class="nt">"progress"</span><span class="p">:</span><span class="w"> </span><span class="mf">100.0</span><span class="p">,</span>
<span class="w">    </span><span class="nt">"fname"</span><span class="p">:</span><span class="w"> </span><span class="s2">"/mnt/LocalData/DATA/MOENCH/20230128_run/230128"</span><span class="p">,</span>
<span class="w">    </span><span class="nt">"data"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span>
<span class="w">    </span><span class="nt">"completeImage"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span>
<span class="w">    </span><span class="nt">"frameNumber"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span>
<span class="w">    </span><span class="nt">"expLength"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span>
<span class="w">    </span><span class="nt">"packetNumber"</span><span class="p">:</span><span class="w"> </span><span class="mi">40</span><span class="p">,</span>
<span class="w">    </span><span class="nt">"bunchId"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span>
<span class="w">    </span><span class="nt">"timestamp"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span>
<span class="w">    </span><span class="nt">"modId"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span>
<span class="w">    </span><span class="nt">"row"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span>
<span class="w">    </span><span class="nt">"column"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span>
<span class="w">    </span><span class="nt">"reserved"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span>
<span class="w">    </span><span class="nt">"debug"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span>
<span class="w">    </span><span class="nt">"roundRNumber"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span>
<span class="w">    </span><span class="nt">"detType"</span><span class="p">:</span><span class="w"> </span><span class="mi">5</span><span class="p">,</span>
<span class="w">    </span><span class="nt">"version"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span>
<span class="w">    </span><span class="nt">"flipRows"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span>
<span class="w">    </span><span class="nt">"quad"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span>
<span class="w">    </span><span class="nt">"addJsonHeader"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="nt">"detectorMode"</span><span class="p">:</span><span class="w"> </span><span class="s2">"analog"</span><span class="p">,</span><span class="w"> </span><span class="nt">"frameMode"</span><span class="p">:</span><span class="w"> </span><span class="s2">"raw"</span><span class="p">},</span>
<span class="p">}</span>
</code></pre></div>
At the end of each acquisition the MOENCH detector sends a dummy header where almost all fields (the most important one is <code>"data" : 0</code>) are zeros or empty. After a dummy JSON header no frame of the detector will be transmitted and should not be awaited by the server.</p>
<h3 id="changes-between-the-firmware-versions">Changes between the firmware versions<a class="headerlink" href="#changes-between-the-firmware-versions" title="Permanent link">Â¶</a></h3>
<p>Changes from  6.x.x to 7.0.0:
4 field names have changed from 6.x.x to 7.x.x because they have also been changed in the detector udp header. 
Since the meaning has not changed, the udp header version stays the same as well as the  zmq header version.
detSpec1 &lt;- bunchId
detSpec2 &lt;- reserved
detSpec3 &lt;- debug
detSpec4 &lt;- roundRNumber</p>
<h2 id="payload">Payload<a class="headerlink" href="#payload" title="Permanent link">Â¶</a></h2>
<p>The second ZMQ packet consists of the acquired capture represented as a 1D array of bytes where 160000 values are stored in a <code>unsigned 16-bit integer</code> (<code>np.uint16</code>) data type. Nevertheless, it is not a just flatten 400x400 2D array where the pixels line up one by one but in a strange order defined (as I understand) by reading from the ADC on the detector's FPGA board.</p>
<h3 id="frame-remapping">Frame remapping<a class="headerlink" href="#frame-remapping" title="Permanent link">Â¶</a></h3>
<p>In the main repository <code>slsDetectorPackage</code> we can find a reference <code>moench03T1ReceiverDataNew.h#66:110</code> which reoders the pixels in a frame:
<div class="highlight"><pre><span></span><code><span class="kt">int</span><span class="w"> </span><span class="n">nadc</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">32</span><span class="p">;</span>
<span class="w">        </span><span class="kt">int</span><span class="w"> </span><span class="n">sc_width</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">25</span><span class="p">;</span>
<span class="w">        </span><span class="kt">int</span><span class="w"> </span><span class="n">sc_height</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">200</span><span class="p">;</span>

<span class="w">        </span><span class="kt">int</span><span class="w"> </span><span class="n">adc_nr</span><span class="p">[</span><span class="mi">32</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="mi">300</span><span class="p">,</span><span class="w"> </span><span class="mi">325</span><span class="p">,</span><span class="w"> </span><span class="mi">350</span><span class="p">,</span><span class="w"> </span><span class="mi">375</span><span class="p">,</span><span class="w"> </span><span class="mi">300</span><span class="p">,</span><span class="w"> </span><span class="mi">325</span><span class="p">,</span><span class="w"> </span><span class="mi">350</span><span class="p">,</span><span class="w"> </span><span class="mi">375</span><span class="p">,</span><span class="w"> </span><span class="mi">200</span><span class="p">,</span><span class="w"> </span><span class="mi">225</span><span class="p">,</span><span class="w"> </span><span class="mi">250</span><span class="p">,</span>
<span class="w">                          </span><span class="mi">275</span><span class="p">,</span><span class="w"> </span><span class="mi">200</span><span class="p">,</span><span class="w"> </span><span class="mi">225</span><span class="p">,</span><span class="w"> </span><span class="mi">250</span><span class="p">,</span><span class="w"> </span><span class="mi">275</span><span class="p">,</span><span class="w"> </span><span class="mi">100</span><span class="p">,</span><span class="w"> </span><span class="mi">125</span><span class="p">,</span><span class="w"> </span><span class="mi">150</span><span class="p">,</span><span class="w"> </span><span class="mi">175</span><span class="p">,</span><span class="w"> </span><span class="mi">100</span><span class="p">,</span><span class="w"> </span><span class="mi">125</span><span class="p">,</span>
<span class="w">                          </span><span class="mi">150</span><span class="p">,</span><span class="w"> </span><span class="mi">175</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">   </span><span class="mi">25</span><span class="p">,</span><span class="w">  </span><span class="mi">50</span><span class="p">,</span><span class="w">  </span><span class="mi">75</span><span class="p">,</span><span class="w">  </span><span class="mi">0</span><span class="p">,</span><span class="w">   </span><span class="mi">25</span><span class="p">,</span><span class="w">  </span><span class="mi">50</span><span class="p">,</span><span class="w">  </span><span class="mi">75</span><span class="p">};</span>

<span class="w">        </span><span class="kt">int</span><span class="w"> </span><span class="n">row</span><span class="p">,</span><span class="w"> </span><span class="n">col</span><span class="p">;</span>

<span class="w">        </span><span class="kt">int</span><span class="w"> </span><span class="n">isample</span><span class="p">;</span>
<span class="w">        </span><span class="kt">int</span><span class="w"> </span><span class="n">iadc</span><span class="p">;</span>
<span class="w">        </span><span class="kt">int</span><span class="w"> </span><span class="n">ix</span><span class="p">,</span><span class="w"> </span><span class="n">iy</span><span class="p">;</span>

<span class="w">        </span><span class="kt">int</span><span class="w"> </span><span class="n">npackets</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">40</span><span class="p">;</span>
<span class="w">        </span><span class="kt">int</span><span class="w"> </span><span class="n">i</span><span class="p">;</span>
<span class="w">        </span><span class="kt">int</span><span class="w"> </span><span class="nf">adc4</span><span class="p">(</span><span class="mi">0</span><span class="p">);</span>
<span class="w">    </span><span class="kt">int</span><span class="w"> </span><span class="n">off</span><span class="o">=</span><span class="k">sizeof</span><span class="p">(</span><span class="n">header</span><span class="p">);</span>
<span class="w">        </span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">ip</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span><span class="w"> </span><span class="n">ip</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="n">npackets</span><span class="p">;</span><span class="w"> </span><span class="n">ip</span><span class="o">++</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="mi">128</span><span class="p">;</span><span class="w"> </span><span class="n">is</span><span class="o">++</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>

<span class="w">                </span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="n">iadc</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span><span class="w"> </span><span class="n">iadc</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="n">nadc</span><span class="p">;</span><span class="w"> </span><span class="n">iadc</span><span class="o">++</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">                    </span><span class="n">i</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">128</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="n">ip</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">is</span><span class="p">;</span>
<span class="w">                    </span><span class="n">adc4</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="kt">int</span><span class="p">)</span><span class="n">iadc</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="mi">4</span><span class="p">;</span>
<span class="w">                    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">i</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="n">sc_width</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="n">sc_height</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">                        </span><span class="c1">//  for (int i=0; i&lt;sc_width*sc_height; i++) {</span>
<span class="w">                        </span><span class="n">col</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">adc_nr</span><span class="p">[</span><span class="n">iadc</span><span class="p">]</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="p">(</span><span class="n">i</span><span class="w"> </span><span class="o">%</span><span class="w"> </span><span class="n">sc_width</span><span class="p">);</span>
<span class="w">                        </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">adc4</span><span class="w"> </span><span class="o">%</span><span class="w"> </span><span class="mi">2</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="mi">0</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">                            </span><span class="n">row</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">199</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="n">sc_width</span><span class="p">;</span>
<span class="w">                        </span><span class="p">}</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="p">{</span>
<span class="w">                            </span><span class="n">row</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">200</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="n">sc_width</span><span class="p">;</span>
<span class="w">                        </span><span class="p">}</span>
<span class="w">                        </span><span class="n">dataMap</span><span class="p">[</span><span class="n">row</span><span class="p">][</span><span class="n">col</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">off</span><span class="w"> </span><span class="o">+</span>
<span class="w">                                            </span><span class="p">(</span><span class="n">nadc</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">iadc</span><span class="p">)</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="mi">2</span><span class="p">;</span><span class="w"> </span><span class="c1">//+16*(ip+1);</span>
<span class="cp">#ifdef HIGHZ</span>
<span class="w">                        </span><span class="n">dataMask</span><span class="p">[</span><span class="n">row</span><span class="p">][</span><span class="n">col</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mh">0x3fff</span><span class="p">;</span><span class="w"> </span><span class="c1">// invert data</span>
<span class="cp">#endif</span>
<span class="w">                        </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">dataMap</span><span class="p">[</span><span class="n">row</span><span class="p">][</span><span class="n">col</span><span class="p">]</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="o">||</span>
<span class="w">                            </span><span class="n">dataMap</span><span class="p">[</span><span class="n">row</span><span class="p">][</span><span class="n">col</span><span class="p">]</span><span class="w"> </span><span class="o">&gt;=</span><span class="w"> </span><span class="n">off</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">nSamples</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="mi">2</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="mi">32</span><span class="p">)</span>
<span class="w">                            </span><span class="n">std</span><span class="o">::</span><span class="n">cout</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="s">"Error: pointer "</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">dataMap</span><span class="p">[</span><span class="n">row</span><span class="p">][</span><span class="n">col</span><span class="p">]</span>
<span class="w">                                      </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="s">" out of range "</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">endl</span><span class="p">;</span>
<span class="w">                    </span><span class="p">}</span>
<span class="w">                </span><span class="p">}</span>
<span class="w">            </span><span class="p">}</span>
<span class="w">        </span><span class="p">}</span>
</code></pre></div>
As the variables used above depend on the type of detector, they remain constant for a single detector model. This allows us to compute this "pixel rearrangement map" just once and then use it for each frame.</p>
<p>So I just rewrite the upper C++ code in python and saved the <code>reorder_map</code> which is basically a 400x400 <code>numpy</code> array which consists of indexes.
<div class="highlight"><pre><span></span><code><span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>

<span class="c1"># 32 numbers</span>
<span class="n">nadc</span> <span class="o">=</span> <span class="mi">32</span>
<span class="n">adc_nr</span> <span class="o">=</span> <span class="p">[</span><span class="mi">300</span><span class="p">,</span> <span class="mi">325</span><span class="p">,</span> <span class="mi">350</span><span class="p">,</span> <span class="mi">375</span><span class="p">,</span> <span class="mi">300</span><span class="p">,</span> <span class="mi">325</span><span class="p">,</span> <span class="mi">350</span><span class="p">,</span> <span class="mi">375</span><span class="p">,</span>
    <span class="mi">200</span><span class="p">,</span> <span class="mi">225</span><span class="p">,</span> <span class="mi">250</span><span class="p">,</span> <span class="mi">275</span><span class="p">,</span> <span class="mi">200</span><span class="p">,</span> <span class="mi">225</span><span class="p">,</span> <span class="mi">250</span><span class="p">,</span> <span class="mi">275</span><span class="p">,</span>
    <span class="mi">100</span><span class="p">,</span> <span class="mi">125</span><span class="p">,</span> <span class="mi">150</span><span class="p">,</span> <span class="mi">175</span><span class="p">,</span> <span class="mi">100</span><span class="p">,</span> <span class="mi">125</span><span class="p">,</span> <span class="mi">150</span><span class="p">,</span> <span class="mi">175</span><span class="p">,</span>
    <span class="mi">0</span><span class="p">,</span> <span class="mi">25</span><span class="p">,</span> <span class="mi">50</span><span class="p">,</span> <span class="mi">75</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">25</span><span class="p">,</span> <span class="mi">50</span><span class="p">,</span> <span class="mi">75</span><span class="p">,</span>
<span class="p">]</span>
<span class="n">npackets</span> <span class="o">=</span> <span class="mi">40</span>
<span class="n">sc_width</span> <span class="o">=</span> <span class="mi">25</span>
<span class="n">sc_height</span> <span class="o">=</span> <span class="mi">200</span>

<span class="c1"># indexes need to be integer</span>
<span class="n">ind</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">zeros</span><span class="p">([</span><span class="mi">400</span><span class="p">,</span> <span class="mi">400</span><span class="p">],</span> <span class="n">dtype</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">int32</span><span class="p">)</span>
<span class="k">for</span> <span class="n">ip</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">npackets</span><span class="p">):</span>
    <span class="k">for</span> <span class="n">iss</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">128</span><span class="p">):</span>
        <span class="k">for</span> <span class="n">iadc</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">32</span><span class="p">):</span>
            <span class="n">i</span> <span class="o">=</span> <span class="mi">128</span> <span class="o">*</span> <span class="n">ip</span> <span class="o">+</span> <span class="n">iss</span>
            <span class="n">adc4</span> <span class="o">=</span> <span class="n">iadc</span> <span class="o">//</span> <span class="mi">4</span>
            <span class="k">if</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">sc_width</span> <span class="o">*</span> <span class="n">sc_height</span><span class="p">:</span>
                <span class="n">col</span> <span class="o">=</span> <span class="n">adc_nr</span><span class="p">[</span><span class="n">iadc</span><span class="p">]</span> <span class="o">+</span> <span class="p">(</span><span class="n">i</span> <span class="o">%</span> <span class="n">sc_width</span><span class="p">)</span>
                <span class="k">if</span> <span class="n">adc4</span> <span class="o">%</span> <span class="mi">2</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
                    <span class="n">row</span> <span class="o">=</span> <span class="mi">199</span> <span class="o">-</span> <span class="n">i</span> <span class="o">//</span> <span class="n">sc_width</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">row</span> <span class="o">=</span> <span class="mi">200</span> <span class="o">+</span> <span class="n">i</span> <span class="o">//</span> <span class="n">sc_width</span>
                <span class="n">ind</span><span class="p">[</span><span class="n">row</span><span class="p">,</span> <span class="n">col</span><span class="p">]</span> <span class="o">=</span> <span class="mi">32</span> <span class="o">*</span> <span class="n">i</span> <span class="o">+</span> <span class="n">iadc</span>
<span class="n">np</span><span class="o">.</span><span class="n">save</span><span class="p">(</span><span class="s2">"reorder_map"</span><span class="p">,</span> <span class="n">ind</span><span class="p">)</span>
</code></pre></div>
Thanks to the built-in <code>numpy</code> feature, we can easily rearrange the 1D array coming from the detector into 2D with the right order:
<div class="highlight"><pre><span></span><code><span class="c1"># load the map once</span>
<span class="n">reorder_map</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="s2">"reorder_map.npy"</span><span class="p">)</span>

<span class="c1"># obtain the 1D array represents frame from ZMQ </span>
<span class="n">msg</span> <span class="o">=</span> <span class="n">socket</span><span class="o">.</span><span class="n">recv</span><span class="p">()</span>
<span class="c1"># saving a raw 1D array</span>
<span class="n">raw_frame</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">frombuffer</span><span class="p">(</span><span class="n">msg</span><span class="p">,</span> <span class="n">dtype</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">uint16</span><span class="p">)</span>
<span class="c1"># rearrange the frame in the right order</span>
<span class="n">frame</span> <span class="o">=</span> <span class="n">raw_frame</span><span class="p">[</span><span class="n">reorder_map</span><span class="p">]</span>
</code></pre></div></p>
</article>
</div>
</div>
</main>
<footer class="md-footer">
<div class="md-footer-meta md-typeset">
<div class="md-footer-meta__inner md-grid">
<div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" rel="noopener" target="_blank">
      Material for MkDocs
    </a>
</div>
</div>
</div>
</footer>
</div>
<div class="md-dialog" data-md-component="dialog">
<div class="md-dialog__inner md-typeset"></div>
</div>
<script id="__config" type="application/json">{"base": "..", "features": [], "search": "../assets/javascripts/workers/search.e5c33ebb.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}}</script>
<script src="../assets/javascripts/bundle.51d95adb.min.js"></script>
<script src="../javascripts/mathjax.js"></script>
<script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
<script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
<script>document$.subscribe(() => {const lightbox = GLightbox({"touchNavigation": true, "loop": false, "zoomable": true, "draggable": true, "openEffect": "zoom", "closeEffect": "zoom", "slideEffect": "slide"});})</script></body>
</html>